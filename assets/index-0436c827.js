import{u as m,F as N,d as h,j as a,f as e,G as x,I as w,J as j,L as C,B as v,K as O,M as G,N as q,P,Q as k,O as D}from"./index-f0b063ab.js";const S=n=>{const t=n.target;t.style.height="inherit",t.style.height=`${t.scrollHeight}px`},b={name:"",description:"",termGoal:"short",priority:"low"},z=n=>t=>o=>O(n,{[t]:o.target.value}),L=n=>()=>G(n);function R(){var s;const n=m(N),[t,o]=h.useState(b),u=l=>{l.preventDefault(),q(t),o(b)},p=l=>c=>o(d=>({...d,[l]:c.target.value})),r=h.useMemo(()=>Object.values(n).filter(l=>{var c;return l.name.toLowerCase().includes(((c=t.name)==null?void 0:c.toLowerCase())??"")}),[n,t.name]);return a("section",{className:"flex flex-col gap-4 h-full",children:[a("form",{onSubmit:u,className:"p-4 rounded-xl w-full border border-neutral-200 flex items-center gap-2",children:[e("input",{type:"text",placeholder:"Novo objetivo",required:!0,value:t.name,className:"w-full",onChange:p("name")}),e("button",{type:"submit",className:`text-neutral-600 bg-neutral-200 p-1 rounded-lg transition-opacity ${t.name!==""?"opacity-100":"opacity-0"}`,children:e(x,{})})]}),r.length>0?e("div",{className:"flex flex-col-reverse gap-4 max-h-full overflow-auto",children:r.map(l=>e(M,{objective:l,onChangeProp:z(l.id),onDelete:L(l.id)},l.id))}):e("div",{className:"w-full h-full flex items-center justify-center text-neutral-400 text-sm select-none",children:e("span",{className:"px-16 text-center",children:(((s=t.name)==null?void 0:s.length)??0)>0?'Clique em "+" para criar um novo objetivo':'Cadastre um novo objetivo no campo "Novo objetivo"'})})]})}const f={habit:"",quantifier:2,habitType:"positive",timeReference:"daily"},I=n=>()=>P(n);function M(n){const{objective:t,onDelete:o,onChangeProp:u}=n,p=m(w),r=m(j),[s,l]=h.useState({...f,objectiveId:t.id}),c=i=>{i.preventDefault(),console.log("submitting",s),k(s),l({...f,objectiveId:t.id})},d=i=>g=>l(y=>({...y,[i]:g.target.value}));return a("div",{className:"rounded-xl w-full border border-neutral-200 flex flex-col gap-2",children:[a("div",{className:"p-4 flex items-start gap-4 justify-between",children:[e(C,{to:"/objectives/pick_emoji",state:{objective:t},className:`${t.emoji===void 0?"opacity-60":"opacity-100"} rounded-lg self-center bg-neutral-200 text-neutral-400 w-10 h-10 flex items-center justify-center`,children:t.emoji??e(x,{})}),a("div",{className:"flex flex-col gap-1",children:[e("h3",{className:"text-xl font-semibold",children:t.name}),a("div",{className:"flex gap-2 flex-wrap",children:[a("select",{className:"py-1 px-2 text-xs rounded-md w-fit",value:t.termGoal,onChange:u("termGoal"),children:[e("option",{value:"short",children:"Curto prazo"}),e("option",{value:"medium",children:"Médio prazo"}),e("option",{value:"long",children:"Longo prazo"})]}),a("select",{className:"py-1 px-2 text-xs rounded-md w-fit",value:t.priority,onChange:u("priority"),children:[e("option",{value:"low",children:"Prioridade baixa"}),e("option",{value:"medium",children:"Prioridade média"}),e("option",{value:"high",children:"Prioridade alta"})]})]})]}),e("button",{onClick:o,className:"text-neutral-500 bg-neutral-100 p-1 rounded-lg",children:e(v,{})})]}),e("textarea",{className:"px-4 w-full text-sm text-neutral-700 resize-none",placeholder:"Descrição do seu objetivo",value:t.description,onChange:u("description"),onKeyDown:S}),a("details",{className:"p-1 rounded-xl flex flex-col gap-2 bg-neutral-100",children:[e("summary",{className:"text-neutral-700 select-none p-3",children:a("div",{className:"flex justify-between flex-1",children:[e("h3",{children:"Metas"}),a("i",{className:"text-sm text-neutral-500",children:[((r.byObjective[t.id]??0)*100).toFixed(1),"% completo"]})]})}),a("div",{className:"flex flex-col gap-2",children:[a("form",{onSubmit:c,className:"flex items-center flex-wrap gap-2 rounded-lg p-3 bg-neutral-50 border border-neutral-200",children:[e("input",{type:"text",placeholder:"Beber água",required:!0,value:s.habit,className:"text-sm w-full p-1 bg-transparent",onChange:d("habit")}),a("div",{className:"flex items-center gap-2",children:[a("div",{className:"flex items-center",children:[e("input",{type:"number",min:1,placeholder:"Quantificador",value:s.quantifier,className:"text-sm w-10 p-1 bg-transparent",style:{appearance:"textfield"},onChange:d("quantifier")}),e("span",{className:"text-xs",children:"vezes"})]}),a("select",{className:"py-1 px-2 text-xs rounded-md w-fit",value:s.habitType,onChange:d("habitType"),children:[e("option",{value:"positive",children:"mais"}),e("option",{value:"negative",children:"menos"})]})]}),a("select",{className:"py-1 px-2 text-xs rounded-md w-fit",value:s.timeReference,onChange:d("timeReference"),children:[e("option",{value:"daily",children:"que ontem"}),e("option",{value:"weekly",children:"que semana passada"}),e("option",{value:"monthly",children:"que mês passado"})]}),e("button",{type:"submit",className:`text-neutral-600 bg-neutral-200 p-2 rounded-lg transition-opacity ${s.habit!==""?"opacity-100":"opacity-0"}`,children:e(x,{})})]}),e("div",{className:"divide-y",children:(p[t.id]??[]).map(i=>a("div",{className:"flex items-center justify-between p-2 gap-2 text-xs",children:[a("div",{className:"flex gap-1 items-center flex-wrap flex-[1]",children:[e("span",{className:"bg-sky-300 py-1 px-2 rounded-lg",children:i.habit}),a("div",{children:[a("span",{className:" bg-purple-300 py-1 px-2 rounded-l-lg",children:[i.quantifier," vezes"]}),e("span",{className:" bg-purple-200 py-1 px-2 rounded-r-lg",children:i.habitType==="positive"?"mais":"menos"})]}),e("span",{className:"bg-pink-300 py-1 px-2 rounded-lg",children:T[i.timeReference]})]}),r.byGoal[i.id]!==void 0&&e("div",{className:"rounded-full w-fit py-1 px-2 flex items-center justify-center bg-neutral-200 text-neutral-500 text-xs",children:a("i",{children:[(r.byGoal[i.id]*100).toFixed(0),"%"]})}),e("button",{onClick:I(i.id),className:"text-neutral-500 bg-neutral-100 p-1 rounded-lg ",children:e(v,{})})]},i.id))})]})]})]})}const T={daily:"que ontem",weekly:"que semana passada",monthly:"que mês passado"};function F(){return a("div",{className:"w-screen p-4 pb-24",children:[e(R,{}),e(D,{})]})}export{F as ObjectivesPage,F as default};
